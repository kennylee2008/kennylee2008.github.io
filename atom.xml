<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Future Labs</title>
  
  <subtitle>A Playground for Fullstack Technologies</subtitle>
  <link href="https://www.futlabs.com/atom.xml" rel="self"/>
  
  <link href="https://www.futlabs.com/"/>
  <updated>2021-08-13T12:47:18.582Z</updated>
  <id>https://www.futlabs.com/</id>
  
  <author>
    <name>Kenny Lee</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>How to find the menu items in WordPress</title>
    <link href="https://www.futlabs.com/2021/08/14/How-to-find-the-menu-items-in-WordPress/"/>
    <id>https://www.futlabs.com/2021/08/14/How-to-find-the-menu-items-in-WordPress/</id>
    <published>2021-08-13T12:10:57.000Z</published>
    <updated>2021-08-13T12:47:18.582Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>This article introduces how to get the menu object and menu path corresponding to the current page, how to get the menu object’s sub menus, how to get the menu object’s parent object, etc. in WordPress. Even if you don’t need to define your own menu presentation, you can get inspiration from the implementation of these functions to be able to do more flexible customization in other places.</p><span id="more"></span><h2 id="Why-you-need-these-helper-function"><a href="#Why-you-need-these-helper-function" class="headerlink" title="Why you need these helper function"></a>Why you need these helper function</h2><p>If you want to be able to use the menu in WordPress more flexibly, you may want to decide all the layout code of the menu by yourself.</p><h2 id="The-Helper-function-code"><a href="#The-Helper-function-code" class="headerlink" title="The Helper function code"></a>The Helper function code</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Find sub menu items of a parent menu item.</span></span><br><span class="line"><span class="comment"> * if $menu_item_parent parameter is 0, return all top menu items</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMenuItems</span>(<span class="params"><span class="variable">$location</span>, <span class="variable">$menu_item_parent</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$items</span> = get_nav_menu_items_by_location(<span class="variable">$location</span>);</span><br><span class="line">    <span class="variable">$rtn</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$items</span> <span class="keyword">as</span> <span class="variable">$item</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$item</span>-&gt;menu_item_parent == <span class="variable">$menu_item_parent</span>) &#123;</span><br><span class="line">            <span class="variable">$rtn</span>[] = <span class="variable">$item</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$rtn</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Find sub menus of a parent menu item</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMenuItemsByParentID</span>(<span class="params"><span class="variable">$menu_item_parent</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$locations</span> = get_nav_menu_locations();</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$locations</span> <span class="keyword">as</span> <span class="variable">$location</span> =&gt; <span class="variable">$v</span>) &#123;</span><br><span class="line">        <span class="variable">$rtn</span> = findMenuItems(<span class="variable">$location</span>, <span class="variable">$menu_item_parent</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$rtn</span>) &amp;&amp; count(<span class="variable">$rtn</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$rtn</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">array</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Get the parent menu item by the specific menu item</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findParentMenuItem</span>(<span class="params"><span class="variable">$menuItem</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$menuItem</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$pid</span> = <span class="variable">$menuItem</span>-&gt;menu_item_parent;</span><br><span class="line">    <span class="variable">$parent</span> = findMenuItemById(<span class="variable">$pid</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$parent</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * You can define a menu tree in your backend of WordPress.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * When you visit a page, according the URI of the page, find</span></span><br><span class="line"><span class="comment"> * the matching menu item and all its ancestor menu items.</span></span><br><span class="line"><span class="comment"> * [0]: The top menu item</span></span><br><span class="line"><span class="comment"> * [1]: The menu item in level 1 of the menu tree</span></span><br><span class="line"><span class="comment"> * [2]: The menu item in level 2 of the menu tree</span></span><br><span class="line"><span class="comment"> * ...</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * for example, if you have a menu tree :</span></span><br><span class="line"><span class="comment"> * A</span></span><br><span class="line"><span class="comment"> *   A1</span></span><br><span class="line"><span class="comment"> *   A2</span></span><br><span class="line"><span class="comment"> *     A21</span></span><br><span class="line"><span class="comment"> *     A22</span></span><br><span class="line"><span class="comment"> * B</span></span><br><span class="line"><span class="comment"> *   B1</span></span><br><span class="line"><span class="comment"> *      B11</span></span><br><span class="line"><span class="comment"> *   B2</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * And the current URI is matching the &quot;B11&quot; menu,you will get:</span></span><br><span class="line"><span class="comment"> * [0] = B</span></span><br><span class="line"><span class="comment"> * [1] = B1</span></span><br><span class="line"><span class="comment"> * [2] = B11</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * So, You can set the B, B1, B11 to selected state on your website!</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCurrentMenuStack</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$rtn</span> = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="variable">$subMenu</span> = findCurrentMenuItem();</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$subMenu</span>)) &#123;</span><br><span class="line">        <span class="variable">$rtn</span>[] = <span class="variable">$subMenu</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!<span class="keyword">empty</span>(<span class="variable">$subMenu</span>-&gt;menu_item_parent)) &#123;</span><br><span class="line">        <span class="variable">$subMenu</span> = findParentMenuItem(<span class="variable">$subMenu</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$subMenu</span>)) &#123;</span><br><span class="line">            <span class="variable">$rtn</span>[] = <span class="variable">$subMenu</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array_reverse(<span class="variable">$rtn</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Get current Menu Item Object</span></span><br><span class="line"><span class="comment"> * If current request URI is matching a menu item,return the menu item.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findCurrentMenuItem</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$uri</span> = <span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_URI&quot;</span>];</span><br><span class="line">    <span class="keyword">if</span> (home_url(<span class="string">&quot;/&quot;</span>) == get_permalink()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> findMenuItem(<span class="variable">$uri</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * You should not call this function directly</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMenuItemById</span>(<span class="params"><span class="variable">$menu_object_id</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$menu_object_id</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$locations</span> = get_nav_menu_locations();</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$locations</span> <span class="keyword">as</span> <span class="variable">$location</span> =&gt; <span class="variable">$v</span>) &#123;</span><br><span class="line">        <span class="variable">$parents</span> = findMenuItems(<span class="variable">$location</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$parents</span> <span class="keyword">as</span> <span class="variable">$parent</span>) &#123;</span><br><span class="line">            <span class="variable">$rtn</span> = hasEqualsMenuItem(<span class="variable">$location</span>, <span class="variable">$parent</span>, <span class="variable">$menu_object_id</span>);</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$rtn</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$rtn</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">Exception</span>(<span class="string">&quot;Not found any MenuItem with menu ID [<span class="subst">$menu_object_id</span>]&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * You should not call this function directly</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasEqualsMenuItem</span>(<span class="params"><span class="variable">$location</span>, <span class="variable">$menuItem</span>, <span class="variable">$menu_object_id</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$menuItem</span>-&gt;object_id == <span class="variable">$menu_object_id</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$menuItem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$children</span> = findMenuItems(<span class="variable">$location</span>, <span class="variable">$menuItem</span>-&gt;object_id);</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$children</span> <span class="keyword">as</span> <span class="variable">$child</span>) &#123;</span><br><span class="line">        <span class="variable">$rtn</span> = hasEqualsMenuItem(<span class="variable">$location</span>, <span class="variable">$child</span>, <span class="variable">$menu_object_id</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$rtn</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$rtn</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * You should not call this function directly</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMenuItem</span>(<span class="params"><span class="variable">$uri</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$locations</span> = get_nav_menu_locations();</span><br><span class="line">    <span class="variable">$menuItemStack</span> = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$locations</span> <span class="keyword">as</span> <span class="variable">$location</span> =&gt; <span class="variable">$v</span>) &#123;</span><br><span class="line">        <span class="variable">$parents</span> = findMenuItems(<span class="variable">$location</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$parents</span> <span class="keyword">as</span> <span class="variable">$parent</span>) &#123;</span><br><span class="line">            privateFindMenuStack(<span class="variable">$location</span>, <span class="variable">$parent</span>, <span class="variable">$uri</span>, <span class="variable">$menuItemStack</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (count(<span class="variable">$menuItemStack</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> end(<span class="variable">$menuItemStack</span>)[<span class="string">&quot;menu_item&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * You should not call this function directly</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">privateFindMenuStack</span>(<span class="params"><span class="variable">$location</span>, <span class="variable">$menuItem</span>, <span class="variable">$uri</span>, &amp;<span class="variable">$menuItemStack</span>, <span class="variable">$level</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$menuItemUrl</span> = <span class="variable">$menuItem</span>-&gt;url;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">        substr(<span class="variable">$uri</span>, <span class="number">0</span>, strlen(<span class="variable">$menuItemUrl</span>)) === <span class="variable">$menuItemUrl</span></span><br><span class="line">        || substr(<span class="variable">$menuItemUrl</span>, <span class="number">0</span>, strlen(<span class="variable">$uri</span>)) === <span class="variable">$uri</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="variable">$menuItemStack</span>[] = <span class="keyword">array</span>(<span class="string">&quot;menu_item&quot;</span> =&gt; <span class="variable">$menuItem</span>, <span class="string">&quot;level&quot;</span> =&gt; <span class="variable">$level</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$children</span> = findMenuItems(<span class="variable">$location</span>, <span class="variable">$menuItem</span>-&gt;object_id);</span><br><span class="line">    <span class="keyword">if</span> (count(<span class="variable">$children</span>) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$children</span> <span class="keyword">as</span> <span class="variable">$child</span>) &#123;</span><br><span class="line">            privateFindMenuStack(<span class="variable">$location</span>, <span class="variable">$child</span>, <span class="variable">$uri</span>, <span class="variable">$menuItemStack</span>, <span class="variable">$level</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * You should not call this function directly</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_nav_menu_items_by_location</span>(<span class="params"><span class="variable">$location</span>, <span class="variable">$args</span> = []</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get all locations</span></span><br><span class="line">    <span class="variable">$locations</span> = get_nav_menu_locations();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get object id by location</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$locations</span>[<span class="variable">$location</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$object</span> = wp_get_nav_menu_object(<span class="variable">$locations</span>[<span class="variable">$location</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$object</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get menu items by menu name</span></span><br><span class="line">    <span class="variable">$menu_items</span> = wp_get_nav_menu_items(<span class="variable">$object</span>-&gt;name, <span class="variable">$args</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return menu post objects</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$menu_items</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$currentMenuStack</span> = getCurrentMenuStack();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Display the current crumb navigation</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$currentMenuStack</span> <span class="keyword">as</span> <span class="variable">$menuItem</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&amp;gt;&quot;</span> . <span class="variable">$menuItem</span>-&gt;title;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Display the top menus</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$topPrimaryMenus</span> = findMenuItems(<span class="string">&quot;primary&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;ul&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$topPrimaryMenus</span> <span class="keyword">as</span> <span class="variable">$topMenuItem</span>) &#123;</span><br><span class="line">    <span class="variable">$selected</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$topMenuItem</span>-&gt;object_id == <span class="variable">$currentMenuStack</span>[<span class="number">0</span>]-&gt;object_id) &#123;</span><br><span class="line">        <span class="variable">$selected</span> = <span class="string">&quot;selected&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;li class=\&quot;&quot;</span> . <span class="variable">$selected</span> . <span class="string">&quot;\&quot;&gt; &lt;a href=\&quot;&quot;</span> . <span class="variable">$topMenuItem</span>-&gt;url . <span class="string">&quot;\&quot;&gt;&quot;</span> . <span class="variable">$topMenuItem</span>-&gt;title . <span class="string">&quot;&lt;/a&gt;&lt;/li&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/ul&gt;&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Enjoy it!</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Overview&quot;&gt;&lt;a href=&quot;#Overview&quot; class=&quot;headerlink&quot; title=&quot;Overview&quot;&gt;&lt;/a&gt;Overview&lt;/h2&gt;&lt;p&gt;This article introduces how to get the menu object and menu path corresponding to the current page, how to get the menu object’s sub menus, how to get the menu object’s parent object, etc. in WordPress. Even if you don’t need to define your own menu presentation, you can get inspiration from the implementation of these functions to be able to do more flexible customization in other places.&lt;/p&gt;</summary>
    
    
    
    
    <category term="WordPress" scheme="https://www.futlabs.com/tags/WordPress/"/>
    
  </entry>
  
</feed>
